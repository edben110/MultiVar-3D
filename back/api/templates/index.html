{% load static %}

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>MultiVar 3D</title>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>
<body>
  <div id="panel">
    <div class="panel-header">
      <h3>MultiVar 3D</h3>
      <button id="themeToggle" class="theme-toggle-btn" title="Cambiar tema">
        <span class="theme-icon">ðŸŒ™</span>
      </button>
    </div>
    
    <div class="input-group">
      <label for="expr">FunciÃ³n matemÃ¡tica (usa x, y, z)</label>
      <input id="expr" placeholder="Ej: x^2 + y^2 + z^2" value="x^2 + y^2">
      <div class="example-buttons">
        <button class="example-btn" data-expr="x^2 + y^2">Paraboloide</button>
        <button class="example-btn" data-expr="x^2 - y^2">Silla de montar</button>
        <button class="example-btn" data-expr="x^2 + y^2 + z^2">Esfera</button>
        <button class="example-btn" data-expr="sin(x) + cos(y)">Onda</button>
        <button class="example-btn" data-expr="x*y*z">Hiperboloide</button>
        <button class="example-btn" data-expr="sqrt(x^2 + y^2 + z^2)">Cono 3D</button>
      </div>
    </div>
    
    <div class="input-group">
      <label for="op">OperaciÃ³n</label>
      <select id="op">
        <option value="superficie">Graficar superficie</option>
        <option value="derivada_x">Derivada parcial respecto a x</option>
        <option value="derivada_y">Derivada parcial respecto a y</option>
        <option value="derivada_z">Derivada parcial respecto a z</option>
        <option value="integral_doble">Integral doble</option>
        <option value="integral_triple">Integral triple</option>
        <option value="dominio_rango">Dominio y rango (estimado)</option>
        <option value="limite">LÃ­mite en (a,b)</option>
        <option value="gradiente">Gradiente en (x0,y0)</option>
        <option value="lagrange">OptimizaciÃ³n con Lagrange</option>
      </select>
    </div>

    <!-- Contenedor para inputs dinÃ¡micos segÃºn operaciÃ³n -->
    <div id="op-params" class="input-group" style="display:none;">
      <!-- se rellenarÃ¡ con JS -->
    </div>
    
    <button id="btnCalcular" class="btn-primary">
      <span class="btn-icon">ðŸ“Š</span>
      Calcular
    </button>
    
    <div id="resultado" class="resultado"></div>
  </div>

  <script src="{% static 'dist/bundle.js' %}"></script>
  <script>const opSelect = document.getElementById('op');
const opParams = document.getElementById('op-params');

const paramTemplates = {
  limite: `
    <label>a (x â†’ a)</label><input id="a" value="0">
    <label>b (y â†’ b)</label><input id="b" value="0">
  `,
  lagrange: `
    <label>RestricciÃ³n g(x,y)</label><input id="g" value="x^2 + y^2">
    <label>Constante c</label><input id="c" value="1">
  `,
  superficie: `
    <label>xmin</label><input id="xmin" value="-3">
    <label>xmax</label><input id="xmax" value="3">
    <label>ymin</label><input id="ymin" value="-3">
    <label>ymax</label><input id="ymax" value="3">
    <label>nx</label><input id="nx" value="60">
    <label>ny</label><input id="ny" value="60">
  `
};

opSelect.addEventListener('change', () => {
  const op = opSelect.value;
  if (paramTemplates[op]) {
    opParams.style.display = 'block';
    opParams.innerHTML = paramTemplates[op];
  } else {
    opParams.style.display = 'none';
    opParams.innerHTML = '';
  }
});
document.addEventListener('DOMContentLoaded', () => {
  const opSelect = document.getElementById('op');
  const paramsDiv = document.getElementById('op-params');

  opSelect.addEventListener('change', () => {
    const op = opSelect.value;
    paramsDiv.innerHTML = ''; // limpia anteriores
    paramsDiv.style.display = 'none';

    if (op === 'limite') {
      paramsDiv.style.display = 'block';
      paramsDiv.innerHTML = `
        <label for="a">a:</label><input id="a" type="number" value="0">
        <label for="b">b:</label><input id="b" type="number" value="0">
      `;
    }

    if (op === 'gradiente') {
      paramsDiv.style.display = 'block';
      paramsDiv.innerHTML = `
        <label for="x0">xâ‚€:</label><input id="x0" type="number" value="0">
        <label for="y0">yâ‚€:</label><input id="y0" type="number" value="0">
      `;
    }

    if (op === 'lagrange') {
      paramsDiv.style.display = 'block';
      paramsDiv.innerHTML = `
        <label for="g">FunciÃ³n objetivo g(x,y):</label>
        <input id="g" placeholder="Ej: x^2 + y^2">
        <label for="c">RestricciÃ³n c(x,y)=0:</label>
        <input id="c" placeholder="Ej: x + y - 1">
      `;
    }
  });
});

</script>
</body>
</html>
